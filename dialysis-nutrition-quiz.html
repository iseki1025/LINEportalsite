<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>透析患者の栄養クイズ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Sans', 'メイリオ', Meiryo, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            width: 100%;
            padding: 40px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: #667eea;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 14px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-number {
            color: #667eea;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .question-text {
            font-size: 20px;
            color: #333;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            padding: 18px 25px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            background: white;
        }

        .option:hover {
            border-color: #667eea;
            background: #f8f9ff;
            transform: translateX(5px);
        }

        .option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .option.correct {
            border-color: #4caf50;
            background: #4caf50;
            color: white;
        }

        .option.incorrect {
            border-color: #f44336;
            background: #f44336;
            color: white;
        }

        .option.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .explanation {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9ff;
            border-left: 4px solid #667eea;
            border-radius: 8px;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .explanation-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .explanation-text {
            color: #555;
            line-height: 1.6;
        }

        .button-container {
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }

        .next-button, .restart-button {
            padding: 15px 40px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .next-button:hover, .restart-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .next-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .result-container {
            text-align: center;
            display: none;
        }

        .result-container.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .score {
            font-size: 72px;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea, #764ba2);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 20px 0;
        }

        .result-message {
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
        }

        .result-detail {
            font-size: 18px;
            color: #666;
            margin-bottom: 30px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .emoji {
            font-size: 60px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🏥 透析患者の栄養クイズ</h1>
            <p class="subtitle">30問の中からランダムに5問出題 - 正しい知識を楽しく学びましょう!</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div id="quizContainer" class="question-container">
            <!-- Questions will be inserted here -->
        </div>

        <div id="resultContainer" class="result-container">
            <!-- Results will be shown here -->
        </div>

        <div class="button-container">
            <button id="nextButton" class="next-button" style="display: none;">次の問題へ</button>
        </div>
    </div>

    <script>
        const quizData = [
            {
                question: "透析患者さんが特に注意すべき栄養素はどれですか?",
                options: ["ビタミンC", "カリウム", "食物繊維"],
                correct: 1,
                explanation: "透析患者さんはカリウムの排泄が困難なため、高カリウム血症を防ぐためにカリウムの摂取制限が必要です。バナナ、メロン、イモ類などは控えめにしましょう。"
            },
            {
                question: "透析患者さんの1日の塩分摂取目安はどのくらいですか?",
                options: ["10g以下", "6g以下", "制限なし"],
                correct: 1,
                explanation: "透析患者さんは1日6g以下の塩分摂取が推奨されています。塩分を摂りすぎると体内に水分が溜まり、血圧上昇や心臓への負担が増加します。"
            },
            {
                question: "透析患者さんが避けるべき果物はどれですか?",
                options: ["りんご", "バナナ", "いちご"],
                correct: 1,
                explanation: "バナナは高カリウム食品の代表例です。1本あたり約400mgのカリウムが含まれており、透析患者さんは避けた方が良い果物です。りんごやいちごは比較的カリウムが少なめです。"
            },
            {
                question: "透析患者さんのタンパク質摂取について正しいのはどれですか?",
                options: ["できるだけ控える", "適量を良質なものから摂取する", "制限なく摂取する"],
                correct: 1,
                explanation: "透析患者さんは適量(体重1kgあたり0.9〜1.2g程度)の良質なタンパク質を摂取することが大切です。魚、肉、卵、大豆製品などから摂取しましょう。"
            },
            {
                question: "リンの摂取を減らすために避けるべき食品はどれですか?",
                options: ["白米", "加工食品やインスタント食品", "きゅうり"],
                correct: 1,
                explanation: "加工食品やインスタント食品にはリン酸塩が添加物として多く含まれています。透析患者さんはリンの蓄積により骨や血管の問題が起こりやすいため、これらの食品は控えましょう。"
            },
            {
                question: "透析患者さんの1日の水分摂取量の目安は?",
                options: ["尿量+500ml程度", "制限なし", "3リットル以上"],
                correct: 0,
                explanation: "透析患者さんは尿量+500ml程度が水分摂取の目安です。水分を摂りすぎると体重増加や息苦しさ、心臓への負担が増えるため注意が必要です。"
            },
            {
                question: "カリウムを多く含む野菜はどれですか?",
                options: ["レタス", "ほうれん草", "もやし"],
                correct: 1,
                explanation: "ほうれん草は高カリウム野菜です。葉物野菜や色の濃い野菜にはカリウムが多く含まれます。茹でこぼすことでカリウムを減らすことができます。"
            },
            {
                question: "カリウムを減らす調理方法として正しいのは?",
                options: ["電子レンジで加熱", "茹でこぼし", "蒸し調理"],
                correct: 1,
                explanation: "野菜を茹でこぼすことでカリウムを30〜40%減らすことができます。小さく切って水にさらし、たっぷりのお湯で茹でこぼすのが効果的です。"
            },
            {
                question: "リンが多く含まれる食品はどれですか?",
                options: ["こんにゃく", "乳製品", "きゅうり"],
                correct: 1,
                explanation: "乳製品(牛乳、チーズ、ヨーグルトなど)はリンを多く含みます。透析患者さんは摂取量に注意が必要です。リンの蓄積は骨や血管の健康に影響します。"
            },
            {
                question: "透析患者さんにおすすめの主食はどれですか?",
                options: ["玄米", "白米", "雑穀米"],
                correct: 1,
                explanation: "白米は玄米や雑穀米と比べてカリウムとリンが少ないため、透析患者さんに適しています。精製度の高い主食を選ぶことが大切です。"
            },
            {
                question: "透析間の適切な体重増加の目安は?",
                options: ["ドライウェイトの5%以内", "制限なし", "10kg以内"],
                correct: 0,
                explanation: "透析間の体重増加はドライウェイト(基準体重)の5%以内に抑えることが推奨されます。過度な体重増加は心臓や血管に負担をかけます。"
            },
            {
                question: "低カリウムの果物はどれですか?",
                options: ["メロン", "りんご", "キウイ"],
                correct: 1,
                explanation: "りんごは比較的カリウムが少ない果物です。1/2個程度なら安心して食べられます。缶詰の果物もシロップを捨てればカリウムを減らせます。"
            },
            {
                question: "透析患者さんが控えるべき調味料はどれですか?",
                options: ["酢", "醤油", "レモン汁"],
                correct: 1,
                explanation: "醤油は塩分が多いため控えめにしましょう。減塩醤油も使用量に注意が必要です。酢やレモン汁、香辛料を活用して味付けすると良いでしょう。"
            },
            {
                question: "エネルギー摂取量の目安はどれですか?",
                options: ["体重1kgあたり25〜35kcal", "体重1kgあたり10kcal", "500kcal/日"],
                correct: 0,
                explanation: "透析患者さんは体重1kgあたり25〜35kcal程度のエネルギー摂取が推奨されます。適切なエネルギー摂取は筋肉量の維持に重要です。"
            },
            {
                question: "透析患者さんが注意すべきナッツ類の理由は?",
                options: ["アレルギーが多い", "カリウムとリンが多い", "消化に悪い"],
                correct: 1,
                explanation: "ナッツ類はカリウムとリンを多く含むため、透析患者さんは摂取量に注意が必要です。少量にとどめることが大切です。"
            },
            {
                question: "外食時に選ぶべきメニューはどれですか?",
                options: ["ラーメン", "握り寿司", "焼肉定食"],
                correct: 1,
                explanation: "握り寿司は塩分が比較的少なく、醤油の量を調整できるため外食の選択肢として良いでしょう。ただし、ご飯の量やネタの種類には注意が必要です。"
            },
            {
                question: "カリウム値を下げる効果がある治療法は?",
                options: ["透析", "運動療法", "日光浴"],
                correct: 0,
                explanation: "透析治療によってカリウムを除去できます。ただし、透析間の食事管理も重要で、高カリウム食品を避けることが必要です。"
            },
            {
                question: "リン吸着薬を飲むタイミングはいつですか?",
                options: ["空腹時", "食事中または食直後", "就寝前"],
                correct: 1,
                explanation: "リン吸着薬は食事中または食直後に服用することで、食品中のリンと結合して吸収を抑えます。タイミングが重要です。"
            },
            {
                question: "透析患者さんが積極的に摂るべきものはどれですか?",
                options: ["塩分", "エネルギー(カロリー)", "水分"],
                correct: 1,
                explanation: "透析患者さんは十分なエネルギー摂取が重要です。エネルギー不足だと体のタンパク質が分解されて老廃物が増えてしまいます。"
            },
            {
                question: "カリウムが少ない野菜はどれですか?",
                options: ["トマト", "きゅうり", "小松菜"],
                correct: 1,
                explanation: "きゅうりは水分が多くカリウムが比較的少ない野菜です。レタス、白菜、もやしなども低カリウム野菜として選べます。"
            },
            {
                question: "透析患者さんが避けるべき飲み物はどれですか?",
                options: ["麦茶", "野菜ジュース", "水"],
                correct: 1,
                explanation: "野菜ジュースはカリウムが非常に多く含まれるため避けるべきです。果汁100%ジュースも同様に注意が必要です。"
            },
            {
                question: "魚の調理法で最もリンを減らせる方法は?",
                options: ["刺身", "焼き魚", "煮魚"],
                correct: 1,
                explanation: "焼き魚は調理過程でリンが流出するため、刺身よりもリン摂取を減らせます。煮魚は煮汁を飲まなければリンの摂取を抑えられます。"
            },
            {
                question: "透析患者さんの便秘対策として適切なのは?",
                options: ["水分を大量に摂る", "適度な運動と食物繊維", "下剤の常用"],
                correct: 1,
                explanation: "適度な運動と食物繊維の摂取が便秘対策に有効です。水分制限があるため、水分を大量に摂ることはできません。主治医に相談して対策を立てましょう。"
            },
            {
                question: "高リン血症が続くと起こりやすい症状はどれですか?",
                options: ["骨がもろくなる", "貧血", "低血糖"],
                correct: 0,
                explanation: "高リン血症が続くと副甲状腺ホルモンが増加し、骨からカルシウムが溶け出して骨がもろくなります。また血管石灰化のリスクも高まります。"
            },
            {
                question: "透析患者さんに適した卵の食べ方はどれですか?",
                options: ["卵は食べない", "1日1個程度", "1日5個以上"],
                correct: 1,
                explanation: "卵は良質なタンパク質源です。1日1個程度であれば問題ありません。ただし、調理法によって塩分やリンの摂取量が変わるので注意しましょう。"
            },
            {
                question: "減塩のコツとして正しいのはどれですか?",
                options: ["減塩醤油を大量に使う", "だしや香辛料を活用する", "塩を使わなければ何を使ってもよい"],
                correct: 1,
                explanation: "だしをしっかりとったり、酢、レモン、香辛料を活用することで、塩分を減らしても美味しく食べられます。減塩醤油も使いすぎには注意が必要です。"
            },
            {
                question: "透析患者さんがコンビニで選ぶべきでない食品はどれですか?",
                options: ["おにぎり(梅)", "カップ麺", "サンドイッチ(卵)"],
                correct: 1,
                explanation: "カップ麺は塩分、リン、カリウムが非常に多く含まれており、透析患者さんには不向きです。スープは特に飲まないようにしましょう。"
            },
            {
                question: "透析患者さんの貧血予防に必要な栄養素はどれですか?",
                options: ["鉄分とタンパク質", "カリウム", "ナトリウム"],
                correct: 0,
                explanation: "透析患者さんは腎性貧血になりやすいため、鉄分と良質なタンパク質の摂取が重要です。ただし、主治医の指示に従って造血剤などの治療も受けましょう。"
            },
            {
                question: "イモ類の調理で推奨される方法はどれですか?",
                options: ["素揚げ", "茹でこぼし後に調理", "電子レンジのみ"],
                correct: 1,
                explanation: "イモ類は高カリウム食品ですが、小さく切って水にさらし、茹でこぼすことでカリウムを減らせます。その後調理すれば比較的安全に食べられます。"
            },
            {
                question: "透析患者さんの理想的な食事回数はどれですか?",
                options: ["1日1食", "1日3食規則正しく", "1日5食以上"],
                correct: 1,
                explanation: "1日3食を規則正しく食べることが基本です。食事を抜くと次の食事で食べ過ぎたり、栄養バランスが崩れやすくなります。"
            },
            {
                question: "透析患者さんが飲酒する場合の注意点はどれですか?",
                options: ["適量を守り、つまみに注意", "毎日飲んでもよい", "種類は何でもよい"],
                correct: 0,
                explanation: "飲酒は主治医の許可を得た上で、適量を守ることが大切です。おつまみは塩分、カリウム、リンに注意し、水分制限も考慮する必要があります。"
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let answered = false;
        let selectedQuestions = [];

        // 配列をシャッフルする関数
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // 30問の中からランダムに5問を選択
        function selectRandomQuestions() {
            const shuffled = shuffleArray(quizData);
            selectedQuestions = shuffled.slice(0, 5);
        }

        function loadQuestion() {
            answered = false;
            const quizContainer = document.getElementById('quizContainer');
            const data = selectedQuestions[currentQuestion];
            
            const progress = ((currentQuestion + 1) / selectedQuestions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';

            quizContainer.innerHTML = `
                <div class="question-number">問題 ${currentQuestion + 1} / ${selectedQuestions.length}</div>
                <div class="question-text">${data.question}</div>
                <div class="options" id="options">
                    ${data.options.map((option, index) => `
                        <div class="option" onclick="selectOption(${index})" data-index="${index}">
                            ${option}
                        </div>
                    `).join('')}
                </div>
                <div class="explanation" id="explanation">
                    <div class="explanation-title">📝 解説</div>
                    <div class="explanation-text">${data.explanation}</div>
                </div>
            `;

            document.getElementById('nextButton').style.display = 'none';
        }

        function selectOption(selectedIndex) {
            if (answered) return;
            
            answered = true;
            const data = selectedQuestions[currentQuestion];
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, index) => {
                option.classList.add('disabled');
                if (index === data.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex) {
                    option.classList.add('incorrect');
                }
            });

            if (selectedIndex === data.correct) {
                score++;
            }

            document.getElementById('explanation').classList.add('show');
            
            const nextButton = document.getElementById('nextButton');
            nextButton.style.display = 'block';
            nextButton.textContent = currentQuestion < quizData.length - 1 ? '次の問題へ' : '結果を見る';
            nextButton.disabled = false;
            nextButton.onclick = nextQuestion;
        }

        function nextQuestion() {
            currentQuestion++;
            
            if (currentQuestion < selectedQuestions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            const quizContainer = document.getElementById('quizContainer');
            const resultContainer = document.getElementById('resultContainer');
            const percentage = (score / selectedQuestions.length) * 100;
            
            let emoji = '🎉';
            let message = '素晴らしい!';
            
            if (percentage === 100) {
                emoji = '🏆';
                message = 'パーフェクト!';
            } else if (percentage >= 80) {
                emoji = '🎉';
                message = '素晴らしい!';
            } else if (percentage >= 60) {
                emoji = '👍';
                message = 'よくできました!';
            } else {
                emoji = '📚';
                message = 'もう一度チャレンジ!';
            }

            quizContainer.style.display = 'none';
            resultContainer.innerHTML = `
                <div class="emoji">${emoji}</div>
                <div class="result-message">${message}</div>
                <div class="score">${score} / ${selectedQuestions.length}</div>
                <div class="result-detail">正答率: ${percentage.toFixed(0)}%</div>
                <button class="restart-button" onclick="restartQuiz()">もう一度挑戦する</button>
            `;
            resultContainer.classList.add('show');
            document.getElementById('nextButton').style.display = 'none';
        }

        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            answered = false;
            selectRandomQuestions(); // 新しい問題をランダムに選択
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('resultContainer').classList.remove('show');
            loadQuestion();
        }

        // 初期化：ランダムに5問を選択してクイズを開始
        selectRandomQuestions();
        loadQuestion();
    </script>
</body>
</html>