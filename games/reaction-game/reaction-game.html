<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åå°„ç¥çµŒã‚²ãƒ¼ãƒ </title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Noto+Sans+JP:wght@400;500;700;900&display=swap');

        :root {
            --font-primary: 'Inter', 'Noto Sans JP', sans-serif;
            --gray-50: #f9fafb; --gray-100: #f3f4f6; --gray-200: #e5e7eb; --gray-500: #6b7280; --gray-700: #374151; --gray-800: #1f2937; --gray-900: #111827;
            
            --theme-color-primary: #00586A;
            --theme-color-game: #ec4899;
            --theme-success: #059669;
            --theme-warning: #ea580c;
            
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            --radius-lg: 1rem; --radius-xl: 1.5rem;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--font-primary);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            /* ãƒãƒ¼ã‚¿ãƒ«èƒŒæ™¯ */
            background: linear-gradient(180deg, #f0f8ff 0%, #ffffff 100%);
            padding: 20px;
            color: var(--gray-900);
        }

        .container {
            text-align: center;
            background: white;
            padding: 40px;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            max-width: 600px;
            width: 100%;
            border: 1px solid var(--gray-200);
        }

        h1 {
            color: var(--theme-color-game);
            margin-bottom: 20px;
            font-size: 1.8rem;
            font-weight: 900;
        }

        #gameArea {
            width: 100%;
            height: 300px;
            border-radius: var(--radius-lg);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: 700;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 0;
            user-select: none;
            box-shadow: var(--shadow);
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        #gameArea:active { transform: scale(0.98); }

        /* çŠ¶æ…‹ã«å¿œã˜ãŸè‰² */
        #gameArea.waiting { background: #ef4444; } /* èµ¤ */
        #gameArea.ready { background: var(--theme-success); } /* ç·‘ */
        #gameArea.idle { background: var(--theme-color-primary); } /* é’(ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼) */

        .stats {
            background: var(--gray-50);
            padding: 20px;
            border-radius: var(--radius-lg);
            margin-top: 20px;
            border: 1px solid var(--gray-200);
            text-align: left;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--gray-200);
            font-size: 1rem;
            color: var(--gray-700);
        }
        .stat-item:last-child { border-bottom: none; }

        .stat-value {
            font-weight: 900;
            color: var(--theme-color-primary);
            font-size: 1.25rem;
        }

        .age-highlight {
            color: var(--theme-color-game);
            font-size: 1.5rem;
        }

        .instructions {
            background: #fff7ed; /* è–„ã„ã‚ªãƒ¬ãƒ³ã‚¸ */
            padding: 15px;
            border-radius: var(--radius-lg);
            margin-bottom: 20px;
            border-left: 5px solid var(--theme-warning);
            text-align: left;
        }

        .instructions p {
            color: #9a3412;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ */
        .reset-btn {
            background: white;
            color: var(--gray-500);
            border: 2px solid var(--gray-200);
            padding: 10px 20px;
            font-size: 14px;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 15px;
            font-weight: 700;
        }
        .reset-btn:hover {
            background: var(--gray-50);
            color: var(--gray-700);
            border-color: var(--gray-300);
        }

        /* æˆ»ã‚‹ãƒœã‚¿ãƒ³ */
        .back-button {
            display: inline-flex;
            align-items: center;
            margin-top: 30px;
            padding: 12px 30px;
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
            text-decoration: none;
            font-size: 16px;
            font-weight: 700;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
            transition: all 0.2s ease;
        }
        .back-button::before { content: "â†"; margin-right: 8px; font-weight: 900; }
        .back-button:hover { transform: translateY(-2px); box-shadow: var(--shadow-xl); }

        .age-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            color: white;
        }
        .age-excellent { background: var(--theme-success); }
        .age-good { background: #3b82f6; }
        .age-average { background: var(--theme-warning); }
        .age-needs-improvement { background: #ef4444; }

    </style>
</head>
<body>
    <div class="container">
        <h1>âš¡ åå°„ç¥çµŒã‚²ãƒ¼ãƒ </h1>
        
        <div class="instructions">
            <p>ç”»é¢ãŒ<strong>èµ¤è‰²</strong>ã‹ã‚‰<strong>ç·‘è‰²</strong>ã«å¤‰ã‚ã£ãŸã‚‰ã€ã§ãã‚‹ã ã‘æ—©ãã‚¯ãƒªãƒƒã‚¯ï¼<br>
            åå¿œé€Ÿåº¦ã‹ã‚‰ã€ã‚ãªãŸã®ã€Œåå°„ç¥çµŒå¹´é½¢ã€ã‚’æ¨å®šã—ã¾ã™ã€‚</p>
        </div>

        <div id="gameArea" class="idle">
            ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆ
        </div>

        <div class="stats">
            <div class="stat-item">
                <span>ä»Šå›ã®è¨˜éŒ²</span>
                <span class="stat-value" id="currentTime">-</span>
            </div>
            <div class="stat-item">
                <span>æ¨å®šåå°„ç¥çµŒå¹´é½¢</span>
                <div>
                    <span class="stat-value age-highlight" id="estimatedAge">-</span>
                    <span id="ageBadge" class="age-badge" style="display:none;"></span>
                </div>
            </div>
            <div class="stat-item">
                <span>ãƒ—ãƒ¬ã‚¤å›æ•°</span>
                <span class="stat-value" id="playCount">0</span>
            </div>
            <div class="stat-item">
                <span>å¹³å‡åå¿œæ™‚é–“</span>
                <span class="stat-value" id="avgTime">-</span>
            </div>
            <div class="stat-item">
                <span>æœ€é€Ÿè¨˜éŒ²</span>
                <span class="stat-value" id="bestTime">-</span>
            </div>
        </div>

        <button class="reset-btn" onclick="resetStats()">è¨˜éŒ²ã‚’ãƒªã‚»ãƒƒãƒˆ</button>

        <br>
        <a href="../../games-selection.html" class="back-button">ãƒŸãƒ‹ã‚²ãƒ¼ãƒ é¸æŠãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹</a>
    </div>

    <script>
        // ... (ä»¥å‰ã®JavaScriptãƒ­ã‚¸ãƒƒã‚¯ã¯ãã®ã¾ã¾ç¶­æŒ) ...
        let gameState = 'idle';
        let startTime = 0;
        let timeoutId = null;
        let reactions = [];
        let bestRecord = Infinity;

        const gameArea = document.getElementById('gameArea');
        const currentTimeEl = document.getElementById('currentTime');
        const playCountEl = document.getElementById('playCount');
        const avgTimeEl = document.getElementById('avgTime');
        const bestTimeEl = document.getElementById('bestTime');
        const estimatedAgeEl = document.getElementById('estimatedAge');
        const ageBadgeEl = document.getElementById('ageBadge');

        gameArea.addEventListener('click', handleClick);

        function handleClick() {
            if (gameState === 'idle') {
                startGame();
            } else if (gameState === 'waiting') {
                clearTimeout(timeoutId);
                gameState = 'idle';
                gameArea.className = 'idle';
                gameArea.textContent = 'æ—©ã™ãã¾ã™ï¼ã‚‚ã†ä¸€åº¦ã‚¯ãƒªãƒƒã‚¯';
            } else if (gameState === 'ready') {
                const reactionTime = Date.now() - startTime;
                recordReaction(reactionTime);
                gameState = 'idle';
                gameArea.className = 'idle';
                gameArea.textContent = 'ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ï¼ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆ';
            }
        }

        function startGame() {
            gameState = 'waiting';
            gameArea.className = 'waiting';
            gameArea.textContent = 'å¾…ã£ã¦...';
            const waitTime = 2000 + Math.random() * 3000;
            
            timeoutId = setTimeout(() => {
                gameState = 'ready';
                gameArea.className = 'ready';
                gameArea.textContent = 'ä»Šã ï¼ã‚¯ãƒªãƒƒã‚¯ï¼';
                startTime = Date.now();
            }, waitTime);
        }

        function estimateAge(reactionTime) {
            let age;
            let badge = '';
            let badgeClass = '';

            if (reactionTime < 180) {
                age = '10ä»£å‰åŠ'; badge = 'è¶…äººç´šï¼'; badgeClass = 'age-excellent';
            } else if (reactionTime < 200) {
                age = '10ä»£å¾ŒåŠ'; badge = 'ç´ æ™´ã‚‰ã—ã„ï¼'; badgeClass = 'age-excellent';
            } else if (reactionTime < 230) {
                age = '20ä»£å‰åŠ'; badge = 'å„ªç§€ï¼'; badgeClass = 'age-excellent';
            } else if (reactionTime < 250) {
                age = '20ä»£å¾ŒåŠ'; badge = 'ã¨ã¦ã‚‚è‰¯ã„ï¼'; badgeClass = 'age-good';
            } else if (reactionTime < 280) {
                age = '30ä»£'; badge = 'è‰¯å¥½ï¼'; badgeClass = 'age-good';
            } else if (reactionTime < 320) {
                age = '40ä»£'; badge = 'å¹³å‡çš„'; badgeClass = 'age-average';
            } else if (reactionTime < 370) {
                age = '50ä»£'; badge = 'ã¾ãšã¾ãš'; badgeClass = 'age-average';
            } else if (reactionTime < 450) {
                age = '60ä»£'; badge = 'è¦æ”¹å–„'; badgeClass = 'age-needs-improvement';
            } else {
                age = '70ä»£ä»¥ä¸Š'; badge = 'ç·´ç¿’ãŒå¿…è¦'; badgeClass = 'age-needs-improvement';
            }

            return { age, badge, badgeClass };
        }

        function recordReaction(time) {
            reactions.push(time);
            currentTimeEl.textContent = time + ' ms';
            playCountEl.textContent = reactions.length;

            const ageData = estimateAge(time);
            estimatedAgeEl.textContent = ageData.age + ' ç›¸å½“';
            ageBadgeEl.textContent = ageData.badge;
            ageBadgeEl.className = 'age-badge ' + ageData.badgeClass;
            ageBadgeEl.style.display = 'inline-block';

            const avg = reactions.reduce((a, b) => a + b, 0) / reactions.length;
            avgTimeEl.textContent = Math.round(avg) + ' ms';

            if (time < bestRecord) {
                bestRecord = time;
                bestTimeEl.textContent = time + ' ms ğŸ†';
            }
        }

        function resetStats() {
            reactions = [];
            bestRecord = Infinity;
            currentTimeEl.textContent = '-';
            playCountEl.textContent = '0';
            avgTimeEl.textContent = '-';
            bestTimeEl.textContent = '-';
            estimatedAgeEl.textContent = '-';
            ageBadgeEl.style.display = 'none';
            gameState = 'idle';
            gameArea.className = 'idle';
            gameArea.textContent = 'ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆ';
        }
    </script>
</body>
</html>