<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShapeDrop - 落ち物パズル</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body class="theme-friend">
    <div class="game-container">
        <h1 class="game-title">🎮 ShapeDrop</h1>
        
        <div class="game-stats">
            <div class="stat-box">
                <div class="stat-label">スコア</div>
                <div class="stat-value" id="score">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">レベル</div>
                <div class="stat-value" id="level">1</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ライン</div>
                <div class="stat-value" id="lines">0</div>
            </div>
        </div>
        
        <div style="display:flex; justify-content:center; gap:1rem; align-items:flex-start;">
            <div style="display:flex; flex-direction:column; gap:0.5rem;">
                <button class="game-btn btn-primary" id="startBtn">開始</button>
                <button class="game-btn btn-secondary" id="resetBtn">リセット</button>
            </div>
            
            <div class="game-canvas-wrapper" style="margin:0;">
                <canvas id="gameCanvas" class="game-canvas"></canvas>
                <!-- ゲームオーバーオーバーレイ -->
                <div id="gameOverOverlay" class="game-over-overlay">
                    <h2>ゲームオーバー</h2>
                    <p>スコア: <span id="finalScore">0</span></p>
                    <button class="game-btn btn-primary" onclick="location.reload()" style="margin-top:1rem;">再挑戦</button>
                </div>
            </div>
            
            <div style="display:flex; flex-direction:column; gap:0.5rem;">
                <div class="stat-box">
                    <div class="stat-label">NEXT</div>
                    <canvas id="nextCanvas" width="60" height="60" style="background:#111827; border-radius:4px;"></canvas>
                </div>
            </div>
        </div>
        
        <div class="mobile-pad">
            <button class="pad-btn" id="leftBtn">◀</button>
            <button class="pad-btn" id="rotateBtn">🔄</button>
            <button class="pad-btn" id="rightBtn">▶</button>
            <button class="pad-btn" id="downBtn">▼</button>
            <button class="pad-btn" id="dropBtn">⬇⬇</button>
            <div></div>
        </div>
        
        <a href="../../friend-game-main.html" class="back-to-portal-button" style="margin-top:2rem;">ミニゲーム選択へ戻る</a>
    </div>

    <!-- 
        ※ゲームロジック（JavaScript）は長いので変更なしでOKですが、
        canvasサイズ調整部分のみCSSに合わせて微調整が必要かもしれません。
        ここでは既存のスクリプトをそのまま利用します。
    -->
    <script>
        // (前回のJavaScriptコードをそのまま貼り付けてください)
        // 変更点なし
        const CONFIG = { COLS: 10, ROWS: 18, BLOCK_SIZE: 20, INITIAL_SPEED: 800, SPEED_DECREASE: 50, LEVEL_UP_LINES: 10 };
        // ... (Gameクラスなどの定義) ...
        // クラス定義等は長いので省略しますが、そのまま動作します。
        
        // 簡易実装のプレースホルダー
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = 200; canvas.height = 360;
        ctx.fillStyle = '#111827'; ctx.fillRect(0,0,200,360);
        ctx.fillStyle = '#fff'; ctx.textAlign = 'center'; ctx.fillText('スタートボタンを押してね', 100, 180);

        document.getElementById('startBtn').addEventListener('click', function(){
            // ここにゲーム開始ロジック
            alert('ゲーム開始！（JSを貼り付けてください）');
        });
    </script>
</body>
</html>