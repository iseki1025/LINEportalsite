<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>災害情報ポータル</title>
    <!-- 共通のCSSファイルを読み込み -->
    <link rel="stylesheet" href="style.css">
    <!-- ▼▼▼【追加】PDF表示と折りたたみ機能のためのスタイル ▼▼▼ -->
    <style>
        /* PDF埋め込み要素のスタイル調整 */
        .pdf-embed-container {
            width: 100%;
            height: 80vh; 
            border: none;
        }

        /* --- ここから折りたたみセクションのスタイル --- */
        
        /* セクション全体の間隔を狭く調整 */
        #dialysis-status {
            padding: 0.8em 1em; /* 上下の余白を少し狭くする */
            margin-bottom: 1em;
        }

        /* クリックする見出しのスタイル */
        .collapsible-trigger {
            cursor: pointer;
            position: relative;
            padding-right: 25px; /* アイコン分の余白 */
        }

        /* 開閉アイコン（▼）のスタイル */
        .collapsible-trigger::after {
            content: '▼';
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%) rotate(0deg);
            font-size: 0.8em;
            transition: transform 0.3s ease;
        }
        
        /* 開いている状態の時のアイコンを上向き（▲）にする */
        .is-open .collapsible-trigger::after {
            transform: translateY(-50%) rotate(180deg);
        }

        /* 折りたたまれるコンテンツのスタイル */
        .collapsible-content {
            /* スムーズな開閉アニメーションのための設定 */
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.5s ease-out;
            padding: 0 1em; /* 閉じた状態では上下のpaddingを0に */
        }

        /* is-openクラスが付いた時にコンテンツを表示 */
        .is-open .collapsible-content {
            max-height: 500px; /* 表示されるコンテンツの最大高さを十分に設定 */
            padding: 0.8em 0; /* 開いた時に上下のpaddingを適用 */
        }

        /* 透析状況のコンテナの幅と高さをコンパクトに */
        #dialysis-status .status-container {
            gap: 10px; /* 各項目の間隔を狭く */
        }
        #dialysis-status .status-item {
            padding: 0.5em; /* 内側の余白を狭く */
        }
        #dialysis-status .status-item h3 {
            margin-bottom: 0.3em;
            font-size: 1em;
        }
        #dialysis-status .status-note {
            margin-top: 0.5em;
        }
        /* --- ここまで折りたたみセクションのスタイル --- */
    </style>
</head>
<!-- bodyタグには災害テーマのクラスを指定 -->
<body class="theme-disaster">

    <div class="container">
        <!-- ▼▼▼ 1. ページタイトルを一番上に表示 ▼▼▼ -->
        <header>
            <h1>災害情報ポータル</h1>
        </header>

        <!-- ▼▼▼ 2. 透析状況のお知らせ（折りたたみ機能付き） ▼▼▼ -->
        <!-- 【変更】classに "collapsible-section is-open" を追加 -->
        <!-- ※初期状態で閉じたい場合は "is-open" を削除してください -->
        <section id="dialysis-status" class="collapsible-section is-open">
            <!-- 【変更】h2に "collapsible-trigger" クラスを追加 -->
            <h2 class="collapsible-trigger">現在の透析状況</h2>
            
            <!-- 【変更】折りたたむ内容をdivで囲む -->
            <div class="collapsible-content">
                <div class="status-container">
                    <!-- 本院 -->
                    <div class="status-item">
                        <h3>本院</h3>
                        <p class="status-text status-ok">透析可</p>
                    </div>
                    <!-- なかもず分院 -->
                    <div class="status-item">
                        <h3>なかもず分院</h3>
                        <p class="status-text status-ng">透析不可 <span class="reason">（断水のため）</span></p>
                    </div>
                    <!-- 三国ケ丘分院 -->
                    <div class="status-item">
                        <h3>三国ケ丘分院</h3>
                        <p class="status-text status-ok">透析可</p>
                    </div>
                </div>
                <p class="status-note">※この情報は災害時などに随時更新されます。</p>
            </div>
        </section>
        <!-- ▲▲▲ ここまで ▲▲▲ -->

        <!-- ▼▼▼ 3. 各コンテンツへのナビゲーション ▼▼▼ -->
        <nav class="page-nav">
            <!-- data-target属性で、どの内容を表示するかを指定 -->
            <a href="#" class="nav-button" data-target="guidebook">防災ガイドブック</a>
            <a href="#" class="nav-button active" data-target="info">基本情報</a>
            <a href="#" class="nav-button" data-target="checklist">備蓄リスト</a>
            <a href="#" class="nav-button" data-target="shelter">避難場所マップ</a>
            <a href="#" class="nav-button" data-target="faq">災害Q&A</a>
        </nav>
        
        <main id="content-area">
            <!-- ▼▼▼ ここから下が、ボタンに応じて表示が切り替わる部分 ▼▼▼ -->

            <!-- 防災ガイドブック の内容 -->
            <section id="guidebook" class="content-section">
                <!-- embedタグでPDFを埋め込み表示 -->
                <embed src="disaster-guide-book.pdf" type="application/pdf" class="pdf-embed-container">
            </section>

            <!-- ① 基本情報 の内容 -->
            <section id="info" class="content-section active">
                <h2>災害への備え：基本情報</h2>
                <p>災害はいつ起こるかわかりません。日頃から適切な準備をしておくことで、いざという時に自分や家族の命を守ることができます。このページでは、災害に備えるための基本的なポイントを解説します。</p>
                
                <h3>防災の基本5つのポイント</h3>
                <ul>
                    <li><strong>ハザードマップの確認</strong><br>
                        お住まいの地域でどのような災害（洪水、土砂災害、地震など）のリスクがあるかを確認し、避難場所や避難経路を家族で共有しておきましょう。</li>
                    <li><strong>非常用持ち出し袋の準備</strong><br>
                        避難時に最低限必要なものをリュックなどにまとめておきましょう。水、食料、常備薬、携帯ラジオ、懐中電灯などが基本です。</li>
                    <li><strong>家庭での備蓄</strong><br>
                        断水や停電に備え、最低3日分、できれば1週間分の水と食料を備蓄しておきましょう。カセットコンロやガスボンベも役立ちます。</li>
                    <li><strong>家具の固定</strong><br>
                        地震による家具の転倒を防ぐため、タンスや本棚などを壁に固定しましょう。</li>
                    <li><strong>安否確認方法の共有</strong><br>
                        災害時には電話が繋がりにくくなります。災害用伝言ダイヤル（171）やSNSなど、家族で安否確認の方法を決めておきましょう。</li>
                </ul>
            </section>

            <!-- ② 備蓄リスト の内容 -->
            <section id="checklist" class="content-section">
                <h2>家庭での備蓄リスト（参考例）</h2>
                <p>「ローリングストック法」（普段の食品を少し多めに買い置きし、使った分だけ新しく買い足す方法）を実践しながら、無理なく備蓄を進めましょう。</p>
                
                <h3>食料・水（最低3日分、推奨1週間分）</h3>
                <ul>
                    <li>飲料水（1人1日3リットルが目安）</li>
                    <li>レトルトご飯、アルファ米</li>
                    <li>缶詰（魚、肉、果物など）</li>
                    <li>カップ麺、インスタント食品</li>
                    <li>栄養補助食品、お菓子</li>
                    <li>カセットコンロ、ガスボンベ</li>
                </ul>

                <h3>生活必需品</h3>
                <ul>
                    <li>ティッシュペーパー、トイレットペーパー</li>
                    <li>ウェットティッシュ、消毒用アルコール</li>
                    <li>簡易トイレ、生理用品</li>
                    <li>使い捨てカイロ、ブランケット</li>
                    <li>乾電池、モバイルバッテリー</li>
                    <li>懐中電灯、携帯ラジオ</li>
                </ul>
            </section>

            <!-- ③ 避難場所マップ の内容 -->
            <section id="shelter" class="content-section">
                <h2>お近くの避難場所を確認しましょう</h2>
                <p>
                    お住まいの市区町村が公開しているハザードマップや防災マップで、指定された避難場所や安全な避難経路を事前に確認しておくことが非常に重要です。
                    以下のリンクから、国土交通省のハザードマップポータルサイトにアクセスできます。ご自身の地域の情報を調べてみましょう。
                </p>
                <div class="quiz-section" style="margin-top:20px;"> <!-- クイズ用のスタイルを流用 -->
                    <a href="https://disaportal.gsi.go.jp/" target="_blank" class="quiz-button">ハザードマップポータルサイトを開く</a>
                    <p style="margin-top: 15px; font-size: 0.9em;">（※国土交通省のサイトが新しいウィンドウで開きます）</p>
                </div>
            </section>

            <!-- ④ 災害Q&A の内容 -->
            <section id="faq" class="content-section qa-search-section" data-csv-path="files/qa-data.csv" data-category="災害">
                <h2>災害対策についての よくあるご質問 (Q&A)</h2>
                <div class="qa-search-container">
                    <input type="search" class="qa-search-input" placeholder="キーワードを入力 (例: 備蓄, 避難所)" autocomplete="off">
                </div>
                <div class="qa-results-container">
                    <!-- 検索結果はここに表示されます -->
                </div>
            </section>
            <!-- ▲▲▲ ここまでが切り替わる部分 ▲▲▲ -->
        </main>
            <!-- ▼▼▼【追加】戻るボタン ▼▼▼ -->
            <a href="index.html" class="back-to-portal-button">総合情報ポータルへ戻る</a>
        <!-- フッターも固定で表示 -->
        <footer>
            <p><small>&copy; 2025 医療法人 好輝会 梶本クリニック</small></p>
        </footer>
    </div>

    <!-- 共通の切り替え用JavaScriptとQ&A用スクリプトを読み込む -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <script src="tab-script.js"></script>
    <script src="qa-loader.js"></script>

    <!-- ▼▼▼【追加】折りたたみ機能を動かすためのJavaScript ▼▼▼ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const triggers = document.querySelectorAll('.collapsible-trigger');
            triggers.forEach(trigger => {
                trigger.addEventListener('click', function() {
                    // クリックされた要素の親である.collapsible-sectionのクラスを切り替える
                    this.parentElement.classList.toggle('is-open');
                });
            });
        });
    </script>
</body>
</html>