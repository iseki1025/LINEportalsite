/* Google Fonts - Inter & Noto Sans JP */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Noto+Sans+JP:wght@400;500;700;900&display=swap');

/* === CSS変数 (梶本クリニック防災ハンドブック デザインシステム) === */
:root {
    --font-primary: 'Inter', 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif;
    
    /* カラーパレット */
    --color-primary: #00586A;       /* メインの濃い青 */
    --color-accent: #00A0C1;        /* ロゴなどの明るい青 */
    --color-text-body: #333333;      /* 本文の濃いグレー */
    --color-text-header: #00586A;    /* 見出しの青 */
    --color-text-light: #666666;    /* 注釈などの薄いグレー */
    --color-warning: #D90000;        /* 危険を知らせる赤 */
    --color-background: #FFFFFF;    /* コンテンツ背景の白 */
    --color-background-pale: #F0F8FA; /* 全体背景の非常に薄い青 */
    --color-border: #DDDDDD;        /* 境界線や枠線のグレー */
    --color-box-bg-blue: #E6F4F7;   /* 水色の背景ボックス */
    --color-box-bg-pink: #FFF0F0;   /* ピンク色の背景ボックス */
    
    /* スペーシング */
    --spacing-1: 0.25rem;
    --spacing-2: 0.5rem;
    --spacing-3: 0.75rem;
    --spacing-4: 1rem;
    --spacing-5: 1.25rem;
    --spacing-6: 1.5rem;
    --spacing-8: 2rem;
    --spacing-10: 2.5rem;
    --spacing-12: 3rem;
    --spacing-16: 4rem;
}

/* === リセット === */
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

/* === 基本スタイル === */
body {
    font-family: var(--font-primary);
    line-height: 1.7;
    color: var(--color-text-body);
    background-color: var(--color-background-pale);
    min-height: 100vh;
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

.container {
    max-width: 1200px;
    margin: var(--spacing-8) auto;
    background: var(--color-background);
    border: 1px solid var(--color-border);
    /* PDFのシャープなデザインを反映 */
    border-radius: 0;
    overflow: hidden;
    box-shadow: none;
}

/* === ヘッダー === */
header, .portal-header {
    text-align: left;
    padding: var(--spacing-8) var(--spacing-6);
    background: none;
    color: var(--color-text-header);
    border-bottom: 1px solid var(--color-border);
}

header h1, .portal-header h1 {
    font-size: clamp(1.8rem, 4vw, 2.5rem);
    font-weight: 900;
    color: var(--color-text-header);
    text-shadow: none;
    padding-bottom: var(--spacing-4);
    border-bottom: 4px solid var(--color-primary);
    display: inline-block;
}

.portal-header p {
    text-shadow: none;
    color: var(--color-text-body);
}

/* === 透析ステータス === */
#dialysis-status {
    padding: var(--spacing-8) var(--spacing-6);
    border-bottom: 1px solid var(--color-border);
    background-color: var(--color-background);
}

#dialysis-status h2 {
    font-size: clamp(1.5rem, 3vw, 1.8rem);
    font-weight: 700;
    text-align: center;
    margin: 0 0 var(--spacing-6) 0;
    color: var(--color-text-header);
}

.status-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-6);
    max-width: 900px;
    margin: 0 auto;
}

.status-item {
    background: var(--color-background);
    border-radius: 0;
    padding: var(--spacing-6);
    border: 1px solid var(--color-border);
    box-shadow: none;
    transition: none;
}

.status-item:hover {
    transform: none;
    box-shadow: none;
    border-color: var(--color-primary);
}

.status-item h3 {
    font-size: 1rem;
    font-weight: 700;
    color: var(--color-text-light);
    margin-bottom: var(--spacing-3);
    text-transform: none;
    letter-spacing: normal;
}

.status-text {
    font-size: 1.8rem;
    font-weight: 700;
}

.status-ok { color: var(--color-primary); }
.status-ng { color: var(--color-warning); }

.status-text .reason {
    font-size: 0.875rem;
    font-weight: 400;
    color: var(--color-text-light);
}

.status-note {
    text-align: center;
    color: var(--color-text-light);
    font-size: 0.875rem;
    margin-top: var(--spacing-6);
}

/* === カードタイル型ポータルナビゲーション (PDFデザインに合わせシンプル化) === */
.portal-nav {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: var(--spacing-6);
    padding: var(--spacing-8) var(--spacing-6);
    background: var(--color-background-pale);
}

.portal-button {
    display: flex;
    flex-direction: column;
    padding: var(--spacing-6);
    background: var(--color-background);
    border: 1px solid var(--color-border);
    border-left: 5px solid; /* テーマカラーを左のボーダーで表現 */
    border-radius: 0;
    text-decoration: none;
    color: var(--color-text-body);
    transition: background-color 0.2s ease;
    box-shadow: none;
}

.portal-button.theme-nutrition { border-left-color: var(--color-accent); }
.portal-button.theme-disaster { border-left-color: var(--color-warning); }
.portal-button.theme-shunt { border-left-color: #10b981; }
.portal-button.theme-friend { border-left-color: #8b5cf6; }
.portal-button.theme-qa { border-left-color: #f97316; }

.portal-button:hover {
    transform: none;
    box-shadow: none;
    background: var(--color-background-pale);
    border-color: var(--color-border);
}

.portal-button .button-title {
    font-size: 1.3rem;
    font-weight: 700;
    margin-bottom: var(--spacing-2);
}

.portal-button .button-desc {
    font-size: 0.9375rem;
    color: var(--color-text-light);
}

.portal-button::before, .portal-button::after {
    display: none; /* 装飾を削除 */
}

/* === タブナビゲーション === */
.page-nav {
    display: flex;
    gap: var(--spacing-1);
    padding: 0 var(--spacing-6);
    background: var(--color-background);
    border-bottom: 1px solid var(--color-border);
    overflow-x: auto;
}

.nav-button {
    padding: var(--spacing-4) var(--spacing-5);
    color: var(--color-text-light);
    border: none;
    border-bottom: 3px solid transparent;
    border-radius: 0;
    font-weight: 700;
    font-size: 1rem;
    transition: all 0.2s ease;
    white-space: nowrap;
    cursor: pointer;
    background: transparent;
}

.nav-button:hover {
    color: var(--color-text-body);
}

.nav-button.active {
    color: var(--color-primary);
    background: transparent;
    border-bottom-color: var(--color-primary);
}

.nav-button.active::after {
    display: none;
}

/* === 戻るボタン === */
.back-to-portal-button {
    display: inline-flex;
    background: var(--color-text-light);
    color: white;
    padding: var(--spacing-3) var(--spacing-6);
    margin: var(--spacing-8) var(--spacing-6) 0;
    text-decoration: none;
    border-radius: 0;
    font-size: 0.9375rem;
    font-weight: 700;
    transition: background-color 0.2s ease;
    box-shadow: none;
    border: none;
}

.back-to-portal-button:hover {
    transform: none;
    box-shadow: none;
    background: var(--color-text-body);
}

/* === コンテンツエリア === */
#content-area {
    padding: var(--spacing-8) var(--spacing-6);
    background: var(--color-background);
}

.content-section.active {
    animation: none; /* フェードインを無効化 */
}

/* === タイポグラフィ === */
h2 {
    font-size: clamp(1.5rem, 3vw, 1.8rem);
    font-weight: 900;
    margin: var(--spacing-8) 0 var(--spacing-4);
    color: var(--color-text-header);
}

h3 {
    font-size: clamp(1.2rem, 2.5vw, 1.4rem);
    font-weight: 700;
    margin: var(--spacing-6) 0 var(--spacing-3);
    color: var(--color-text-body);
}

p {
    margin: var(--spacing-4) 0;
    color: var(--color-text-body);
}

a {
    color: var(--color-accent);
    text-decoration: underline;
    font-weight: 700;
}

a:hover {
    color: var(--color-primary);
}

/* === リスト (PDFのデザインを忠実に再現) === */
ul, ol {
    list-style: none;
    margin: var(--spacing-4) 0;
}

ul li, ol li {
    position: relative;
    padding: var(--spacing-3) 0 var(--spacing-3) var(--spacing-10);
    margin: var(--spacing-2) 0;
    background: none;
    border: none;
    border-radius: 0;
    box-shadow: none;
}

ul li:hover, ol li:hover {
    box-shadow: none;
    transform: none;
}

/* 通常のリスト（・） */
ul li::before {
    content: "・";
    position: absolute;
    left: var(--spacing-4);
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-primary);
    font-weight: 900;
    font-size: 1.5rem;
}

/* 番号付きリスト（円形） */
ol {
    counter-reset: item;
}

ol li::before {
    content: counter(item);
    counter-increment: item;
    position: absolute;
    left: var(--spacing-4);
    top: 50%;
    transform: translateY(-50%);
    background: var(--color-primary);
    color: white;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    font-weight: 700;
}

/* テーマカラーごとのリストスタイル */
.theme-disaster ul li, .theme-disaster ol li {
    padding-left: var(--spacing-12);
    border: none;
    background: var(--color-box-bg-pink);
}

.theme-disaster ul li::before, .theme-disaster ol li::before {
    background: var(--color-warning);
    left: var(--spacing-5);
}
.theme-disaster ul li::before {
    content: "✕";
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    width: 28px;
    height: 28px;
    border-radius: 0;
}

/* === Q&A & 汎用リンクボタン === */
.qa-item, .quiz-section, .content-link-button {
    background: var(--color-background);
    border-radius: 0;
    margin-bottom: var(--spacing-4);
    box-shadow: none;
    border: 1px solid var(--color-border);
    transition: none;
}

.qa-item:hover, .quiz-section:hover, .content-link-button:hover {
    box-shadow: none;
    transform: none;
    background: var(--color-background-pale);
}

.quiz-button {
    display: inline-block;
    padding: var(--spacing-4) var(--spacing-8);
    background: var(--color-primary);
    color: white;
    border: none;
    border-radius: 0;
    font-size: 1.1rem;
    font-weight: 700;
    text-decoration: none;
}
.quiz-button:hover {
    background: var(--color-accent);
    text-decoration: none;
    color: white;
}
.quiz-button::after { content: none; }


/* === フッター === */
footer {
    text-align: center;
    padding: var(--spacing-6);
    background: var(--color-background-pale);
    color: var(--color-text-light);
    font-size: 0.875rem;
    border-top: 1px solid var(--color-border);
}

/* === PDF表示関連 === */
.pdf-embed-container {
    width: 100%;
    height: 100vh;
    border: none;
}

/* === 折りたたみセクション === */
.collapsible-trigger { cursor: pointer; }
.collapsible-trigger::after {
    content: '▼';
    float: right;
    transition: transform 0.3s ease;
}
.is-open .collapsible-trigger::after { transform: rotate(180deg); }
.collapsible-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.5s ease-out;
}
.is-open .collapsible-content {
    max-height: 500px;
}

/* === レスポンシブ対応 === */
@media (max-width: 768px) {
    .container {
        margin: 0;
        border: none;
    }
    
    header, .portal-header, #content-area, #dialysis-status, .portal-nav, .page-nav {
        padding-left: var(--spacing-4);
        padding-right: var(--spacing-4);
    }
}